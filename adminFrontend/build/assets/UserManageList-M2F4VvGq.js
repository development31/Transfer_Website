import{r as s,j as e}from"./index-DaKUt_DV.js";import{a as c}from"./index-BDD5Wvo_.js";import{F as v,e as k,g as B}from"./index-DDtXgTNU.js";import{C as H,a as I}from"./CCardBody-4OFbAYXQ.js";import{C as P,a as R,b as _,c as N,d as m,e as L,f as h}from"./CTable-CGk0PLLg.js";import{a as w}from"./CButton-DH5yodee.js";import{C as z}from"./CCardText-B8ejKv-z.js";import{C as y,a as p,b as M}from"./CRow-sBPEtvTW.js";import{C as $,a as q,b as V,c as G,d as J}from"./CModalTitle-DBM11O6T.js";import{C as K}from"./CForm-MRPvJMuP.js";import"./axios-DNDjIgWp.js";import"./CConditionalPortal-Cw5Vw1E-.js";const oe=()=>{const[l,o]=s.useState([]),[S,U]=s.useState(!0),[x,n]=s.useState(""),[g,d]=s.useState(""),[j,i]=s.useState(""),[b,t]=s.useState(!1),[u,C]=s.useState(!1),[E,f]=s.useState(null),T=async()=>{try{const a=await c.get("https://www.panel.efe-travel.com/api/userManageData/");o(a.data),console.log("HI"),U(!1)}catch(a){console.error("Error fetching user manage data:",a),U(!1)}};s.useEffect(()=>{T()},[]);const D=async()=>{if(u)try{const a=await c.put(`https://www.panel.efe-travel.com/api/userManageData/${E}`,{name:x,email:g,password:j});o(l.map(r=>r._id===E?a.data:r)),window.alert("User Manage successfully updated")}catch(a){console.error("Error updating user manage:",a)}else try{const a=await c.post("https://www.panel.efe-travel.com/api/userManageData/Username",{name:x,email:g,password:j});o([...l,a.data]),window.alert("User Manage successfully added")}catch(a){console.error("Error adding user manage:",a)}n(""),d(""),i(""),t(!1),C(!1),f(null)},A=async a=>{try{await c.delete(`https://www.panel.efe-travel.com/api/userManageData/${a}`),o(l.filter(r=>r._id!==a)),window.alert("User Manage successfully deleted")}catch(r){console.error("Error deleting user manage:",r)}},F=a=>{n(a.Name),d(a.email),i(a.password),f(a._id),C(!0),t(!0)};return S?e.jsx("div",{className:"loading",children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsxs(H,{className:"d-flex 100%",children:[e.jsxs(P,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h1",{style:{fontSize:"24px",color:"tomato"},children:"User Manage List"}),e.jsx(w,{color:"primary",size:"sm",className:"me-md-2",onClick:()=>{t(!b),C(!1),f(null),n(""),d(""),i("")},children:"ADD USERS"})]}),e.jsx(I,{children:e.jsx(z,{children:l.length===0?e.jsx("div",{className:"no-data",children:"No user manage data found."}):e.jsx(y,{children:e.jsx(p,{children:e.jsxs(R,{striped:!0,children:[e.jsx(_,{children:e.jsxs(N,{children:[e.jsx(m,{scope:"col",children:"Name"}),e.jsx(m,{scope:"col",children:"Email"}),e.jsx(m,{scope:"col",children:"Password"}),e.jsx(m,{scope:"col",children:"Actions"})]})}),e.jsx(L,{children:l.map((a,r)=>e.jsxs(N,{children:[e.jsx(h,{children:a.Name}),e.jsx(h,{children:a.email}),e.jsx(h,{children:a.password}),e.jsxs(h,{children:[e.jsx(v,{icon:k,style:{color:"#aaad10",cursor:"pointer",marginRight:"10px"},onClick:()=>F(a)}),e.jsx(v,{icon:B,style:{color:"#bb1616",cursor:"pointer"},onClick:()=>A(a._id)})]})]},a._id))})]})})})})})]}),e.jsxs($,{size:"lg",visible:b,onClose:()=>t(!1),"aria-labelledby":"AddUsersModalTitle",children:[e.jsx(q,{closeButton:!0,children:e.jsx(V,{id:"AddUsersModalTitle",children:u?"Edit User":"Add User"})}),e.jsx(G,{children:e.jsxs(K,{children:[e.jsxs(y,{children:[e.jsx(p,{xs:"6",children:e.jsx(M,{type:"text",id:"name",label:"Name",placeholder:"Name",value:x,onChange:a=>n(a.target.value)})}),e.jsx(p,{xs:"6",children:e.jsx(M,{type:"email",id:"email",label:"Email Address",placeholder:"Email Address",value:g,onChange:a=>d(a.target.value)})})]}),e.jsx(y,{children:e.jsx(p,{xs:"6",children:e.jsx(M,{type:"password",id:"password",label:"Password",placeholder:"Password",value:j,onChange:a=>i(a.target.value)})})})]})}),e.jsxs(J,{children:[e.jsx(w,{color:"secondary",onClick:()=>t(!1),children:"Close"}),e.jsx(w,{color:"primary",onClick:D,children:u?"Update User":"Add User"})]})]})]})};export{oe as default};
