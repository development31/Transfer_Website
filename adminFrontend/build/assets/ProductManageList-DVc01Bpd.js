import{r as t,j as e}from"./index-DaKUt_DV.js";import{a as j}from"./index-BDD5Wvo_.js";import{F as N,e as z,g as $}from"./index-DDtXgTNU.js";import{C as U,a as q}from"./CCardBody-4OFbAYXQ.js";import{C as V,a as G,b as J,c as F,d as o,e as K,f as n}from"./CTable-CGk0PLLg.js";import{a as b}from"./CButton-DH5yodee.js";import{C as O,a as Q,b as W,c as X,d as Y}from"./CModalTitle-DBM11O6T.js";import{C as Z}from"./CForm-MRPvJMuP.js";import{C as v,a as l,b as d}from"./CRow-sBPEtvTW.js";import"./axios-DNDjIgWp.js";import"./CConditionalPortal-Cw5Vw1E-.js";const pe=()=>{const[c,i]=t.useState([]),[k,D]=t.useState(!0),[f,p]=t.useState(""),[C,u]=t.useState(""),[w,m]=t.useState(""),[y,h]=t.useState(""),[x,g]=t.useState(null),[A,s]=t.useState(!1),[P,S]=t.useState(!1),[T,E]=t.useState(null),I=async()=>{try{const a=await j.get("https://www.panel.efe-travel.com/api/ProductManageData");i(a.data),D(!1)}catch(a){console.error("Error fetching product manage data:",a),D(!1)}};t.useEffect(()=>{I()},[]);const B=async()=>{const a=new FormData;a.append("sno",f),a.append("productname",C),a.append("description",w),a.append("price",y),x&&a.append("image",x);try{const r=await j.post("https://www.panel.efe-travel.com/api/ProductManageData/pname",a,{headers:{"Content-Type":"multipart/form-data"}});i([...c,r.data]),p(""),u(""),m(""),h(""),g(null),s(!1)}catch(r){console.error("Error adding product manage:",r)}},_=async a=>{try{await j.delete(`https://www.panel.efe-travel.com/api/ProductManageData/${a}`),i(c.filter(r=>r._id!==a))}catch(r){console.error("Error deleting product manage:",r)}},H=a=>{p(a.sno),u(a.productname),m(a.description),h(a.price),g(null),S(!0),E(a._id),s(!0)},L=async()=>{const a=new FormData;a.append("sno",f),a.append("productname",C),a.append("description",w),a.append("price",y),x&&a.append("image",x);try{const R=(await j.put(`https://www.panel.efe-travel.com/api/ProductManageData/${T}`,a,{headers:{"Content-Type":"multipart/form-data"}})).data;i(c.map(M=>M._id===T?{...M,...R}:M)),p(""),u(""),m(""),h(""),g(null),S(!1),E(null),s(!1),window.alert("Product successfully updated")}catch(r){console.error("Error updating product manage:",r)}};return k?e.jsx("div",{children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsxs(U,{children:[e.jsxs(V,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h1",{style:{fontSize:"24px",color:"chocolate"},children:"Product Manage List"}),e.jsx(b,{color:"primary",size:"sm",onClick:()=>s(!0),children:"Add Product Manage"})]}),e.jsx(q,{children:c.length===0?e.jsx("div",{children:"No product manage data found."}):e.jsxs(G,{striped:!0,hover:!0,bordered:!0,responsive:!0,children:[e.jsx(J,{color:"dark",children:e.jsxs(F,{children:[e.jsx(o,{scope:"col",children:"S no."}),e.jsx(o,{scope:"col",children:"Product Name"}),e.jsx(o,{scope:"col",children:"Description"}),e.jsx(o,{scope:"col",children:"Price"}),e.jsx(o,{scope:"col",children:"Image"}),e.jsx(o,{scope:"col",children:"Actions"})]})}),e.jsx(K,{children:c.map(a=>e.jsxs(F,{children:[e.jsx(n,{children:a.sno}),e.jsx(n,{children:a.productname}),e.jsx(n,{children:a.description}),e.jsx(n,{children:a.price}),e.jsx(n,{children:a.image&&e.jsx("img",{src:`https://www.panel.efe-travel.com/api/uploads/${a.image}`,alt:a.productname,style:{width:"100px"}})}),e.jsxs(n,{children:[e.jsx(N,{icon:z,style:{color:"#b3ae0f",cursor:"pointer",marginRight:"10px"},onClick:()=>H(a)}),e.jsx(N,{icon:$,style:{color:"#bb1616",cursor:"pointer"},onClick:()=>_(a._id)})]})]},a._id))})]})})]}),e.jsxs(O,{size:"lg",visible:A,onClose:()=>s(!1),children:[e.jsx(Q,{closeButton:!0,children:e.jsx(W,{children:P?"Edit Product Manage":"Add Product Manage"})}),e.jsx(X,{children:e.jsxs(Z,{children:[e.jsxs(v,{className:"mb-3",children:[e.jsx(l,{children:e.jsx(d,{type:"text",value:f,onChange:a=>p(a.target.value),placeholder:"S No."})}),e.jsx(l,{children:e.jsx(d,{type:"text",value:C,onChange:a=>u(a.target.value),placeholder:"Product Name"})})]}),e.jsxs(v,{className:"mb-3",children:[e.jsx(l,{children:e.jsx(d,{type:"text",value:w,onChange:a=>m(a.target.value),placeholder:"Description"})}),e.jsx(l,{children:e.jsx(d,{type:"text",value:y,onChange:a=>h(a.target.value),placeholder:"Price"})})]}),e.jsx(v,{className:"mb-3",children:e.jsx(l,{children:e.jsx(d,{type:"file",onChange:a=>g(a.target.files[0])})})})]})}),e.jsxs(Y,{children:[e.jsx(b,{color:"primary",onClick:P?L:B,children:P?"Update":"Add"})," ",e.jsx(b,{color:"secondary",onClick:()=>s(!1),children:"Cancel"})]})]})]})};export{pe as default};
