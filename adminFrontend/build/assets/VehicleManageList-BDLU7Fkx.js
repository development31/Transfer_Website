import{r as s,j as e}from"./index-DaKUt_DV.js";import{a as g}from"./index-BDD5Wvo_.js";import{F as q,e as ae,g as se}from"./index-DDtXgTNU.js";import{C as te,a as re}from"./CCardBody-4OFbAYXQ.js";import{C as le,a as ce,b as ne,c as G,d as t,e as oe,f as c}from"./CTable-CGk0PLLg.js";import{a as $}from"./CButton-DH5yodee.js";import{C as ie}from"./CCardText-B8ejKv-z.js";import{C as i,a as r,c as n,b as o}from"./CRow-sBPEtvTW.js";import{C as de,a as he,b as pe,c as me,d as xe}from"./CModalTitle-DBM11O6T.js";import{C as ue}from"./CForm-MRPvJMuP.js";import"./axios-DNDjIgWp.js";import"./CConditionalPortal-Cw5Vw1E-.js";const Ne=()=>{const[h,m]=s.useState([]),[J,H]=s.useState(!0),[C,f]=s.useState(""),[v,V]=s.useState(""),[y,b]=s.useState(""),[S,w]=s.useState(""),[F,M]=s.useState(""),[N,E]=s.useState(""),[T,D]=s.useState(""),[P,K]=s.useState(""),[I,k]=s.useState(""),[A,_]=s.useState(""),[p,B]=s.useState(!1),[R,z]=s.useState(null),[x,U]=s.useState(null),[O,d]=s.useState(!1),u="https://www.panel.efe-travel.com/api/",Q=async()=>{try{const a=await g.get(u+"VehicleManageData");m(a.data),H(!1)}catch(a){console.error("Error fetching vehicle manage data:",a),H(!1)}};s.useEffect(()=>{Q()},[]);const W=async()=>{const a=new FormData;a.append("sno",C),a.append("vname",v),a.append("vcolor",y),a.append("vnumber",S),a.append("vseats",F),a.append("vprice",N),a.append("vperKmcharge",I),a.append("contact",T),a.append("email",P),a.append("suitcase",A),x&&a.append("image",x);try{const l=await g.post(u+"VehicleManageData",a,{headers:{"Content-Type":"multipart/form-data"}});m([...h,l.data]),j(),d(!1),window.alert("Vehicle successfully added")}catch(l){console.error("Error adding vehicle:",l)}},X=a=>{f(a.sno),V(a.vname),b(a.vcolor),w(a.vnumber),M(a.vseats),E(a.vprice),D(a.contact),K(a.email),_(a.suitcase),k((a==null?void 0:a.vperKmcharge)??""),B(!0),z(a._id),d(!0)},Y=async()=>{const a=new FormData;a.append("sno",C),a.append("vname",v),a.append("vcolor",y),a.append("vnumber",S),a.append("vseats",F),a.append("vprice",N),a.append("contact",T),a.append("email",P),a.append("suitcase",A),a.append("vperKmcharge",I),x&&a.append("image",x);try{const ee=(await g.put(`${u}VehicleManageData/${R}`,a,{headers:{"Content-Type":"multipart/form-data"}})).data;m(h.map(L=>L._id===R?{...L,...ee}:L)),j(),B(!1),z(null),d(!1),window.alert("Vehicle successfully updated")}catch(l){console.error("Error updating vehicle manage:",l)}},Z=async a=>{try{await g.delete(`${u}VehicleManageData/${a}`),m(h.filter(l=>l._id!==a)),window.alert("Vehicle successfully deleted")}catch(l){console.error("Error deleting vehicle manage:",l)}},j=()=>{f(""),V(""),b(""),w(""),M(""),E(""),D(""),K(""),_(""),k(""),U(null)};return J?e.jsx("div",{className:"loading",children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsxs(te,{className:"d-flex 100%",children:[e.jsxs(le,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h1",{style:{fontSize:"24px",color:"purple"},children:"Vehicle Manage List"}),e.jsx($,{color:"primary",size:"sm",className:"me-md-2",onClick:()=>{j(),B(!1),d(!0)},children:p?"Edit Vehicle":"Add Vehicle"})]}),e.jsx(re,{children:e.jsx(ie,{children:h.length===0?e.jsx("div",{className:"no-data",children:"No vehicle manage data found."}):e.jsx(i,{children:e.jsx(r,{children:e.jsxs(ce,{striped:!0,hover:!0,bordered:!0,responsive:!0,children:[e.jsx(ne,{color:"dark",children:e.jsxs(G,{children:[e.jsx(t,{scope:"col",children:"S No."}),e.jsx(t,{scope:"col",children:"Vehicle type"}),e.jsx(t,{scope:"col",children:"Vehicle Color"}),e.jsx(t,{scope:"col",children:"Flight Number"}),e.jsx(t,{scope:"col",children:"Vehicle Seats"}),e.jsx(t,{scope:"col",children:"Vehicle Price"}),e.jsx(t,{scope:"col",children:"Per Km price"}),e.jsx(t,{scope:"col",children:"Contact"}),e.jsx(t,{scope:"col",children:"Email"}),e.jsx(t,{scope:"col",children:"Suitcase"}),e.jsx(t,{scope:"col",children:"Image"}),e.jsx(t,{scope:"col",children:"Actions"})]})}),e.jsx(oe,{children:h.map((a,l)=>e.jsxs(G,{children:[e.jsx(t,{scope:"row",children:l+1}),e.jsx(c,{children:a.vname}),e.jsx(c,{children:a.vcolor}),e.jsx(c,{children:a.vnumber}),e.jsx(c,{children:a.vseats}),e.jsx(c,{children:a.vprice}),e.jsx(c,{children:a.vperKmcharge}),e.jsx(c,{children:a.contact}),e.jsx(c,{children:a.email}),e.jsx(c,{children:a.suitcase}),e.jsx(c,{children:a.image&&e.jsx("img",{src:`https://www.panel.efe-travel.com/api/uploads/${a.image}`,alt:a.vname,style:{width:"100px"}})}),e.jsxs(c,{children:[e.jsx(q,{icon:ae,style:{color:"#b3ae0f",cursor:"pointer",marginRight:"10px"},onClick:()=>X(a)}),e.jsx(q,{icon:se,style:{color:"#bb1616",cursor:"pointer"},onClick:()=>Z(a._id)})]})]},a._id))})]})})})})})]}),e.jsxs(de,{visible:O,onClose:()=>d(!1),children:[e.jsx(he,{onClose:()=>d(!1),children:e.jsx(pe,{children:p?"Edit Vehicle":"Add Vehicle"})}),e.jsx(me,{children:e.jsxs(ue,{children:[e.jsxs(i,{className:"mb-3",children:[e.jsxs(r,{children:[e.jsx(n,{htmlFor:"sno",children:"S No."}),e.jsx(o,{type:"text",id:"sno",value:C,onChange:a=>f(a.target.value),placeholder:"S No.",disabled:p})]}),e.jsxs(r,{children:[e.jsx(n,{htmlFor:"vname",children:"Vehicle Type"}),e.jsx(o,{type:"text",id:"vname",value:v,onChange:a=>V(a.target.value),placeholder:"Vehicle Type"})]})]}),e.jsxs(i,{className:"mb-3",children:[e.jsxs(r,{children:[e.jsx(n,{htmlFor:"vcolor",children:"Vehicle Color"}),e.jsx(o,{type:"text",id:"vcolor",value:y,onChange:a=>b(a.target.value),placeholder:"Vehicle Color"})]}),e.jsxs(r,{children:[e.jsx(n,{htmlFor:"vnumber",children:"Flight Number"}),e.jsx(o,{type:"text",id:"vnumber",value:S,onChange:a=>w(a.target.value),placeholder:"Flight Number"})]})]}),e.jsxs(i,{className:"mb-3",children:[e.jsxs(r,{children:[e.jsx(n,{htmlFor:"vseats",children:"Vehicle Seats"}),e.jsx(o,{type:"text",id:"vseats",value:F,onChange:a=>M(a.target.value),placeholder:"Vehicle Seats"})]}),e.jsxs(r,{children:[e.jsx(n,{htmlFor:"vprice",children:"Vehicle Price"}),e.jsx(o,{type:"text",id:"vprice",value:N,onChange:a=>E(a.target.value),placeholder:"Vehicle Price"})]})]}),e.jsxs(i,{className:"mb-3",children:[e.jsxs(r,{children:[e.jsx(n,{htmlFor:"contact",children:"Contact"}),e.jsx(o,{type:"text",id:"contact",value:T,onChange:a=>D(a.target.value),placeholder:"Contact"})]}),e.jsxs(r,{children:[e.jsx(n,{htmlFor:"email",children:"Email"}),e.jsx(o,{type:"email",id:"email",value:P,onChange:a=>K(a.target.value),placeholder:"Email"})]})]}),e.jsxs(i,{className:"mb-3",children:[e.jsxs(r,{children:[e.jsx(n,{htmlFor:"suitcase",children:"Per KM. Price"}),e.jsx(o,{type:"text",id:"perkmprice",value:I,onChange:a=>k(a.target.value),placeholder:"Per KM. Price"})]}),e.jsxs(r,{children:[e.jsx(n,{htmlFor:"suitcase",children:"Suitcase"}),e.jsx(o,{type:"text",id:"suitcase",value:A,onChange:a=>_(a.target.value),placeholder:"Suitcase"})]})]}),e.jsx(i,{className:"mb-3",children:e.jsxs(r,{children:[e.jsx(n,{htmlFor:"image",children:"Image"}),e.jsx(o,{type:"file",id:"image",onChange:a=>U(a.target.files[0])})]})}),e.jsx(i,{className:"mb-3",children:e.jsx(r,{children:e.jsx("div",{className:"text-info",children:"Image size should not exceed 5 MB."})})})]})}),e.jsxs(xe,{children:[e.jsx($,{color:"secondary",onClick:()=>{j(),d(!1)},children:"Close"}),e.jsx($,{color:"primary",onClick:p?Y:W,children:p?"Update Vehicle":"Add Vehicle"})]})]})]})};export{Ne as default};
