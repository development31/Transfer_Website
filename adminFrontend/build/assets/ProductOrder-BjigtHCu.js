import{r,j as e}from"./index-DaKUt_DV.js";import{a as u}from"./index-BDD5Wvo_.js";import{F as b,i as V,e as G,g as J}from"./index-DDtXgTNU.js";import{C as K,a as W}from"./CCardBody-4OFbAYXQ.js";import{C as X,a as Y,b as Z,c as q,d as a,e as ee,f as s}from"./CTable-CGk0PLLg.js";import{C as A}from"./CForm-MRPvJMuP.js";import{b as c,C as H,a as l}from"./CRow-sBPEtvTW.js";import{a as S}from"./CButton-DH5yodee.js";import{C as te,a as re,b as ae,c as se,d as ce}from"./CModalTitle-DBM11O6T.js";import"./axios-DNDjIgWp.js";import"./CConditionalPortal-Cw5Vw1E-.js";const je=()=>{const[n,d]=r.useState([]),[I,v]=r.useState(!0),[w,p]=r.useState(""),[N,h]=r.useState(""),[P,x]=r.useState(""),[B,m]=r.useState(""),[O,y]=r.useState(""),[E,j]=r.useState(""),[T,C]=r.useState(""),[R,i]=r.useState(!1),[f,M]=r.useState(!1),[F,k]=r.useState(null),[_,L]=r.useState(""),Q=async()=>{try{const t=await u.get("https://www.panel.efe-travel.com/api/productOrders");d(t.data),v(!1)}catch(t){console.error("Error fetching product orders:",t),v(!1)}};r.useEffect(()=>{Q()},[]);const $=async()=>{try{const t=await u.get(`https://www.panel.efe-travel.com/api/productOrders?buyerName=${_}`);d(t.data)}catch(t){console.error("Error searching product orders:",t)}},z=async t=>{try{await u.delete(`https://www.panel.efe-travel.com/api/productOrders/${t}`),d(n.filter(o=>o._id!==t))}catch(o){console.error("Error deleting product order:",o)}},D=t=>{p(t.productName),h(t.quantity),x(t.pricePaid),m(t.buyerName),y(t.buyerContact),j(t.buyerEmail),C(t.paymentStatus),M(!0),k(t._id),i(!0)},U=async()=>{const t={productName:w,quantity:N,pricePaid:P,buyerName:B,buyerContact:O,buyerEmail:E,paymentStatus:T};try{const o=await u.put(`https://www.panel.efe-travel.com/api/productOrders/${F}`,t);d(n.map(g=>g._id===F?{...g,...o.data}:g)),p(""),h(""),x(""),m(""),y(""),j(""),C(""),M(!1),k(null),i(!1),window.alert("Product order successfully updated")}catch(o){console.error("Error updating product order:",o)}};return I?e.jsx("div",{children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsxs(K,{children:[e.jsxs(X,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h1",{style:{fontSize:"24px",color:"chocolate"},children:"Product Order List"}),e.jsxs(A,{className:"d-flex align-items-center",children:[e.jsx(c,{type:"text",placeholder:"Search by Buyer Name",value:_,onChange:t=>L(t.target.value),className:"me-2"}),e.jsx(S,{color:"primary",onClick:$,children:e.jsx(b,{icon:V})})]})]}),e.jsx(W,{children:n.length===0?e.jsx("div",{children:"No product orders found."}):e.jsxs(Y,{striped:!0,children:[e.jsx(Z,{children:e.jsxs(q,{children:[e.jsx(a,{scope:"col",children:"Product Name"}),e.jsx(a,{scope:"col",children:"Quantity"}),e.jsx(a,{scope:"col",children:"Price Paid"}),e.jsx(a,{scope:"col",children:"Buyer Name"}),e.jsx(a,{scope:"col",children:"Buyer Contact"}),e.jsx(a,{scope:"col",children:"Buyer Email"}),e.jsx(a,{scope:"col",children:"Payment Status"}),e.jsx(a,{scope:"col",children:"Actions"})]})}),e.jsx(ee,{children:n.map(t=>e.jsxs(q,{children:[e.jsx(s,{children:t.productName}),e.jsx(s,{children:t.quantity}),e.jsx(s,{children:t.pricePaid}),e.jsx(s,{children:t.buyerName}),e.jsx(s,{children:t.buyerContact}),e.jsx(s,{children:t.buyerEmail}),e.jsx(s,{children:t.paymentStatus}),e.jsxs(s,{children:[e.jsx(b,{icon:G,style:{color:"#b3ae0f",cursor:"pointer",marginRight:"10px"},onClick:()=>D(t)}),e.jsx(b,{icon:J,style:{color:"#bb1616",cursor:"pointer"},onClick:()=>z(t._id)})]})]},t._id))})]})})]}),e.jsxs(te,{size:"lg",visible:R,onClose:()=>i(!1),children:[e.jsx(re,{closeButton:!0,children:e.jsx(ae,{children:f?"Edit Product Order":"Add Product Order"})}),e.jsx(se,{children:e.jsxs(A,{children:[e.jsxs(H,{className:"mb-3",children:[e.jsx(l,{children:e.jsx(c,{type:"text",value:w,onChange:t=>p(t.target.value),placeholder:"Product Name"})}),e.jsx(l,{children:e.jsx(c,{type:"text",value:N,onChange:t=>h(t.target.value),placeholder:"Quantity"})}),e.jsx(l,{children:e.jsx(c,{type:"text",value:P,onChange:t=>x(t.target.value),placeholder:"Price Paid"})})]}),e.jsxs(H,{className:"mb-3",children:[e.jsx(l,{children:e.jsx(c,{type:"text",value:B,onChange:t=>m(t.target.value),placeholder:"Buyer Name"})}),e.jsx(l,{children:e.jsx(c,{type:"text",value:O,onChange:t=>y(t.target.value),placeholder:"Buyer Contact"})}),e.jsx(l,{children:e.jsx(c,{type:"text",value:E,onChange:t=>j(t.target.value),placeholder:"Buyer Email"})}),e.jsx(l,{children:e.jsx(c,{type:"text",value:T,onChange:t=>C(t.target.value),placeholder:"Payment Status"})})]})]})}),e.jsxs(ce,{children:[e.jsx(S,{color:"primary",onClick:f?U:null,children:f?"Update":"Add"})," ",e.jsx(S,{color:"secondary",onClick:()=>i(!1),children:"Cancel"})]})]})]})};export{je as default};
